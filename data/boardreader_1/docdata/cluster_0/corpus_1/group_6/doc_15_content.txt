A deal that would help prevent more mortgage foreclosures pulled Wall Street out of a slump Thursday, giving the market a mostly higher close. Democratic lawmakers reached an agreement with Citigroup Inc. on a plan to let bankruptcy judges alter home loans in an effort to prevent foreclosures. Other lenders are expected to follow suit.   Wall Street traded lower for much of the session after a profit warning from Wal-Mart Stores Inc. intensified fears that consumers are even worse off than thought. Their reluctance to spend - evident in Thursday's retail sales reports from many of the nation's biggest merchants - could make it harder for the nation to recover from the recession.   The Dow Jones industrial average ended with a modest decline while the technology-focused Nasdaq composite index rose more than 1 percent. Tech stocks showed some of the biggest advances on the belief that the industry will lead the market's recovery. The number of advancing stocks outpaced decliners by about 2-to-1 on the New York Stock Exchange.   The agreement between Citigroup and Sens. Richard Durbin, Charles Schumer and Christopher Dodd raised hopes that the steep downturn in the housing market that has badly hurt consumer spending and the overall economy could be halted. The lending industry had fought the concept, saying it would force lenders to raise mortgage rates. Housing stocks rose on the news. 'Any sort of arrangement that can stave off foreclosure and modify existing mortgages, all of those things will help to get to the bottom of the housing market decline. And only then can we see a real turnaround in the economy,' said Randy Frederick, director of trading and derivatives at Charles Schwab.   Investors remained cautious for much of the session after Wal-Mart said December sales at stores open for at least a year rose by 1.2 percent, including fuel, a worse performance than analysts expected. The nation's largest retailer also slashed its projection for fiscal fourth-quarter earnings, and its shares fell more than 7 percent. 'It's not surprising to me that the market came back a little bit,' Frederick said. Investors largely expected, with the exception of Wal-Mart, for the retail sales figures to be bad, and so for the most part were able to push them aside.   According to preliminary calculations, the Dow fell 27.24, or 0.31 percent, to 8,742.46.   Broader stock indicators advanced. The Standard &amp;amp; Poor's 500 index rose 3.08, or 0.34 percent, to 909.73, and the Nasdaq composite index rose 17.95, or 1.12 percent, to 1,617.01.   The Russell 2000 index of smaller companies fell 4.91, or 0.99 percent, to 502.01.
